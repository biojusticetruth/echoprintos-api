<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EchoprintOS â€” Capture</title>
  <link rel="stylesheet" href="./theme.css" />
</head>
<body>

  <!-- shared header -->
  <header class="site-nav">
    <a class="brand" href="/ledger/"><span class="sprout">ðŸŒ±</span> EchoprintOS</a>
    <nav>
      <a href="/ledger/capture.html">Capture</a>
      <a href="/ledger/">Ledger</a>
      <a href="/ledger/about.html">About</a>
    </nav>
  </header>

  <main class="page">
    <section class="card hero">
      <h1 class="title">Capture a Post</h1>
      <p class="blurb">Lightweight entry form you can use now. Later weâ€™ll wire this to Make for auto-posting.</p>
    </section>

    <section class="card">
      <form id="captureForm">
        <div class="row" style="margin-bottom:10px">
          <input class="mono" type="text" id="cap_title" placeholder="Title (optional)" />
        </div>
        <div class="row" style="margin-bottom:10px">
          <input class="mono" type="url" id="cap_permalink" placeholder="Permalink to the post (optional)" />
        </div>
        <div class="row" style="margin-bottom:10px">
          <input class="mono" type="text" id="cap_platform" placeholder="Platform (X, LinkedIn, Substack) â€” optional" />
        </div>
        <div class="row" style="margin-bottom:10px">
          <button class="btn btn-primary" type="submit">Generate ECP & Preview</button>
          <a class="btn btn-ghost" href="/ledger/">Back to Ledger</a>
        </div>
      </form>
      <div id="capturePreview" class="tiny mono"></div>
      <p class="tiny muted" style="margin-top:10px">
        Note: this page doesnâ€™t write to the ledger yet. It only prepares the record fields weâ€™ll submit later.
      </p>
    </section>
  </main>

  <script>
    // simple local preview â€” no network writes yet
    function ecpNow(){
      const pad = (n, s=2)=>String(n).padStart(s,'0');
      const d = new Date();
      const ecp = `ECP-${d.getUTCFullYear()}${pad(d.getUTCMonth()+1)}${pad(d.getUTCDate())}${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}${pad(d.getUTCSeconds())}${pad(d.getUTCMilliseconds(),3)}`;
      return ecp;
    }
    document.getElementById('captureForm').addEventListener('submit', (ev)=>{
      ev.preventDefault();
      const title = document.getElementById('cap_title').value.trim();
      const permalink = document.getElementById('cap_permalink').value.trim();
      const platform = document.getElementById('cap_platform').value.trim();

      const ecp = ecpNow();
      const utc = new Date().toISOString().replace('T',' ').replace('Z',' UTC');

      document.getElementById('capturePreview').innerHTML =
        `ECP: ${ecp}<br/>Timestamp (UTC): ${utc}<br/>Title: ${title||'â€”'}<br/>Permalink: ${permalink||'â€”'}<br/>Platform: ${platform||'â€”'}`;
    });
  </script>
    <!-- â€¦all of your pageâ€™s HTMLâ€¦ -->

  <!-- Scripts (order matters) -->
  <script src="./env.js"></script>
  <script type="module" src="./capture.html"></script>
</body>
</html>
